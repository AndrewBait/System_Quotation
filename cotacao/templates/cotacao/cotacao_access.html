{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h1>{{ object.nome }}</h1>
    <p><strong>Departamento:</strong> {{ object.departamento.nome }}</p>
    <p><strong>Data de Abertura:</strong> {{ object.data_abertura }}</p>
    <p><strong>Data de Fechamento:</strong> {{ object.data_fechamento }}</p>

    <hr>
    <h3>Itens da Cotação</h3>
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>Produto</th>
                    <th>Quantidade</th>
                    <th>Tipo de Volume</th>
                </tr>
            </thead>
            <tbody>
                {% for item in object.itens_cotacao.all %}
                <tr>
                    <td>{{ item.produto.name }}</td>
                    <td>{{ item.quantidade }}</td>
                    <td>{{ item.get_tipo_volume_display }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <tbody>
        {% for item in object.itens_cotacao.all %}
        <tr>
            <td>{{ item.produto.name }}</td>
            <td>{{ item.quantidade }}</td>
            <td>{{ item.get_tipo_volume_display }}</td>
            <td>
                <form method="post" action="{% url 'submit_price' item.id %}">
                    {% csrf_token %}
                    {{ resposta_form.preco }}
                    <button type="submit" class="btn btn-primary">Submeter Preço</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</div>
{% endblock %}

<div class="container mt-3">
    <!-- Departamentos -->
    <div class="row g-3">
        <div class="col-md-6">
            <label for="available_departments" class="form-label">Departamentos Disponíveis:</label>
            <select id="available_departments" class="form-control" multiple>
                <!-- Opções de departamentos carregadas aqui -->
                {% for department in departments %}
                <option value="{{ department.id }}">{{ department.name }}</option>
                {% endfor %}
            </select>
            <button id="add_department" class="btn btn-primary mt-2">Adicionar &gt;&gt;</button>
        </div>
        <div class="col-md-6">
            <label for="selected_departments" class="form-label">Departamentos Selecionados:</label>
            <select id="selected_departments" name="departments" class="form-control" multiple>
                <!-- Opções de departamentos selecionados serão movidas para aqui -->
            </select>
            <button id="remove_department" class="btn btn-secondary mt-2">&lt;&lt; Remover</button>
        </div>
    </div>

    <!-- Categorias e Subcategorias -->
    <div class="row g-3 mt-3">
        <div class="col-md-6">
            <label for="id_categories" class="form-label">Categorias:</label>
            <select id="id_categories" name="categories" class="selectpicker form-control" multiple data-live-search="true">
                <!-- Opções de categorias carregadas dinamicamente com base na seleção do departamento -->
            </select>
        </div>
        <div class="col-md-6">
            <label for="id_subcategories" class="form-label">Subcategorias:</label>
            <select id="id_subcategories" name="subcategories" class="selectpicker form-control" multiple data-live-search="true">
                <!-- Opções de subcategorias carregadas dinamicamente com base na seleção da categoria -->
            </select>
        </div>
    </div>

    <!-- Avaliação por Estrelas -->
    <div class="row g-3 mt-3">
        <div class="col-12">
            <label>Qualidade do Fornecedor:</label>
            <div class="rating" data-field-name="quality_rating" data-score="{{ object.quality_rating }}">
                <!-- Estrelas para avaliação; clique altera o valor do campo oculto -->
                <span data-value="1">&#9734;</span>
                <span data-value="2">&#9734;</span>
                <span data-value="3">&#9734;</span>
                <span data-value="4">&#9734;</span>
                <span data-value="5">&#9734;</span>
            </div>
            <input type="hidden" id="quality_rating" name="quality_rating" value="{{ object.quality_rating }}">
        </div>
    </div>
</div>





    
<script type="text/javascript">
    $(document).ready(function() {
        // Inicializar estrelas baseadas nos valores existentes
        $('.rating').each(function() {
            const ratingElement = this;
            const value = $(this).attr('data-score');  // Lê o valor do atributo data-score
            updateStars(ratingElement, value);
        });
    
        function updateStars(ratingElement, value) {
            const stars = ratingElement.querySelectorAll('span');
            stars.forEach((star, index) => {
                if (index < value) {
                    star.innerHTML = '&#9733;'; // Estrela sólida
                    star.style.color = 'gold';  // Assegure-se de que a cor está correta
                } else {
                    star.innerHTML = '&#9734;'; // Estrela vazia
                    star.style.color = 'grey';
                }
            });
            $(ratingElement).next('input[type="hidden"]').val(value); // Atualiza o campo oculto
        }
    
        // Evento de clique nas estrelas
        document.querySelectorAll('.rating span').forEach(star => {
            star.addEventListener('click', function() {
                const ratingElement = this.parentNode;
                const value = parseInt(this.dataset.value);
                updateStars(ratingElement, value);
            });
        });
        console.log("Valor de inicialização:", value);
    });
    </script>
    

